{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function QR(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scanned = _useState4[0],\n      setScanned = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tipoVehiculo = _useState6[0],\n      setTipoVehiculo = _useState6[1];\n\n  var getVehiculo = function getVehiculo(id) {\n    var res, type;\n    return _regeneratorRuntime.async(function getVehiculo$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(axios.get(\"http://172.20.10.2:8080/api/v1/vehiculo/\" + id));\n\n          case 3:\n            res = _context.sent;\n            console.log(res.data);\n            type = res.data.tipo;\n            setTipoVehiculo(type);\n            type === \"bike\" ? navigation.navigate(\"Bike\", {\n              id: id,\n              tipo: type\n            }) : navigation.navigate(\"Patinete\", {\n              id: id,\n              tipo: type\n            });\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"error\", _context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var askForCameraPermission = function askForCameraPermission() {\n    (function _callee() {\n      var _await$BarCodeScanner, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n            case 2:\n              _await$BarCodeScanner = _context2.sent;\n              status = _await$BarCodeScanner.status;\n              setHasPermission(status == 'granted');\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  };\n\n  useEffect(function () {\n    askForCameraPermission();\n  }, []);\n\n  var handleBarCodeScanner = function handleBarCodeScanner(_ref2) {\n    var type = _ref2.type,\n        data = _ref2.data;\n    setScanned(true);\n    console.log('Type: ' + type + '\\nData: ' + data);\n    getVehiculo(data);\n    console.log('El tipoVehiculo es: ' + tipoVehiculo);\n  };\n\n  if (hasPermission === null) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.texto,\n        children: \"Requesting for camera permission\"\n      })\n    });\n  }\n\n  if (hasPermission === false) {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        style: styles.texto,\n        children: \"No access to camera\"\n      }), _jsx(TouchableHighlight, {\n        style: styles.button,\n        onPress: function onPress() {\n          return askForCameraPermission();\n        },\n        children: _jsx(Text, {\n          style: styles.textButton,\n          children: \"Allow Camera\"\n        })\n      })]\n    });\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Image, {\n        style: {\n          width: 100,\n          height: 100,\n          alignItems: 'center'\n        },\n        source: require(\"../assets/def.png\")\n      }), _jsx(Text, {\n        style: {\n          color: '#333333',\n          fontWeight: 'bold',\n          fontFamily: 'Baskerville-Bold',\n          fontSize: 30\n        },\n        children: \"Hi-Go!\"\n      })]\n    }), _jsxs(View, {\n      style: styles.content,\n      children: [_jsx(BarCodeScanner, {\n        onBarCodeScanned: scanned ? undefined : handleBarCodeScanner,\n        style: styles.qr\n      }), _jsx(Text, {\n        style: styles.texto,\n        children: \"A\\xFAn no se ha escaneado nada\"\n      })]\n    })]\n  });\n}\n;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#3EA9FA',\n    padding: 15\n  },\n  header: {\n    justifyContent: 'space-around',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  texto: {\n    marginBottom: 5,\n    fontSize: 25,\n    fontWeight: 'bold',\n    fontFamily: 'Times New Roman',\n    top: 100\n  },\n  content: {\n    alignItems: 'center'\n  },\n  qr: {\n    top: 50,\n    height: 300,\n    width: 300,\n    alignContent: 'center'\n  },\n  button: {\n    alignSelf: 'center',\n    width: 350,\n    height: 60,\n    bottom: 15,\n    top: 170,\n    borderRadius: 50,\n    backgroundColor: '#333333',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 25\n  },\n  textButton: {\n    color: '#FEFAE0',\n    fontWeight: 'bold',\n    fontFamily: 'AmericanTypewriter-Bold',\n    fontSize: 40\n  },\n  mal: {\n    marginBottom: 5,\n    fontSize: 25,\n    fontWeight: 'bold',\n    fontFamily: 'Times New Roman',\n    color: '#F9C74F',\n    left: 5,\n    alignItems: 'center'\n  }\n});\nexport default QR;","map":{"version":3,"sources":["C:/Users/Hp/Desktop/Sprint 3/backend-sql-db/frontend/src/views/QR.js"],"names":["React","useEffect","useState","BarCodeScanner","axios","QR","navigation","route","hasPermission","setHasPermission","scanned","setScanned","tipoVehiculo","setTipoVehiculo","getVehiculo","id","get","res","console","log","data","type","tipo","navigate","askForCameraPermission","requestPermissionsAsync","status","handleBarCodeScanner","styles","container","texto","button","textButton","header","width","height","alignItems","require","color","fontWeight","fontFamily","fontSize","content","undefined","qr","StyleSheet","create","flex","backgroundColor","padding","justifyContent","flexDirection","marginBottom","top","alignContent","alignSelf","bottom","borderRadius","mal","left"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, TextInput, TouchableHighlight, StyleSheet, Image, Dimensions } from 'react-native';\r\nimport { BarCodeScanner } from 'expo-barcode-scanner';\r\nimport axios from 'axios';\r\n\r\nexport function QR( {navigation, route}) {\r\n    const [hasPermission, setHasPermission] = useState(null);\r\n    const [scanned, setScanned] = useState(false);\r\n    const [tipoVehiculo, setTipoVehiculo] = useState();\r\n\r\n    const getVehiculo = async (id) => {\r\n        try {\r\n            const res = await axios.get(\"http://172.20.10.2:8080/api/v1/vehiculo/\"+id);\r\n            console.log(res.data);\r\n            var type = res.data.tipo;\r\n            setTipoVehiculo(type);\r\n            type === \"bike\" ? \r\n                navigation.navigate(\"Bike\", { id: id, tipo: type }) : \r\n                navigation.navigate(\"Patinete\", { id: id, tipo: type});\r\n        } catch (error) {\r\n            console.log(\"error\", error);\r\n        }\r\n    };\r\n\r\n    const askForCameraPermission = () => {\r\n        (async () => {\r\n            const { status } = await BarCodeScanner.requestPermissionsAsync();\r\n            setHasPermission(status == 'granted')\r\n        })()\r\n    }\r\n\r\n    // Request Camera Permission\r\n    useEffect(() => {\r\n        askForCameraPermission();\r\n    }, []);\r\n\r\n    // What happens when we scan the bar code\r\n    const handleBarCodeScanner = ({ type, data }) => {\r\n        setScanned(true);\r\n        console.log('Type: ' + type + '\\nData: ' + data)\r\n        getVehiculo(data);\r\n        console.log('El tipoVehiculo es: '+tipoVehiculo);\r\n    }\r\n\r\n    // Check permissions and return the screens\r\n    if (hasPermission === null) {\r\n        return (\r\n            <View style={styles.container}>\r\n                <Text style={styles.texto}>Requesting for camera permission</Text>\r\n            </View>\r\n        )\r\n    }\r\n\r\n    if (hasPermission === false) {\r\n        return (\r\n            <View style={styles.container}>\r\n                <Text style ={styles.texto}>No access to camera</Text>\r\n                <TouchableHighlight style={styles.button} onPress={() => askForCameraPermission()}>\r\n                    <Text style={styles.textButton}>Allow Camera</Text>\r\n                </TouchableHighlight>\r\n            </View>\r\n        )\r\n    }\r\n\r\n    // Return the view\r\n    return (\r\n        <View style={styles.container}>\r\n            <View style={styles.header}>\r\n                <Image style={{ width: 100, height: 100, alignItems: 'center' }} source={require('../assets/def.png')} />\r\n                <Text\r\n                    style={{ color: '#333333', fontWeight: 'bold', fontFamily: 'Baskerville-Bold', fontSize: 30 }}>\r\n                    Hi-Go!\r\n                </Text>\r\n            </View>\r\n            <View style={styles.content}>\r\n                <BarCodeScanner\r\n                    onBarCodeScanned={scanned ? undefined : handleBarCodeScanner}\r\n                    style={styles.qr} />\r\n                <Text style={styles.texto}>Aún no se ha escaneado nada</Text>\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#3EA9FA',\r\n        padding: 15\r\n    },\r\n    header: {\r\n        justifyContent: 'space-around',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n    },\r\n    texto: {\r\n        marginBottom: 5,\r\n        fontSize: 25,\r\n        fontWeight: 'bold',\r\n        fontFamily: 'Times New Roman',\r\n        top: 100,\r\n    },\r\n    content: {\r\n        alignItems: 'center'\r\n    }, \r\n    qr: {\r\n        top:50,\r\n        height: 300, \r\n        width: 300, \r\n        alignContent: 'center'\r\n    },\r\n    button: {\r\n        alignSelf: 'center',\r\n        width: 350,\r\n        height: 60,\r\n        bottom: 15,\r\n        top: 170,\r\n        borderRadius: 50,\r\n        backgroundColor: '#333333',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginBottom: 25\r\n    },\r\n    textButton: {\r\n        color: '#FEFAE0',\r\n        fontWeight: 'bold',\r\n        fontFamily: 'AmericanTypewriter-Bold',\r\n        fontSize: 40\r\n    },\r\n    mal: {\r\n        marginBottom: 5,\r\n        fontSize: 25,\r\n        fontWeight: 'bold',\r\n        fontFamily: 'Times New Roman',\r\n        color: '#F9C74F',\r\n        left: 5,\r\n        alignItems: 'center'\r\n    }\r\n});\r\nexport default QR;"]},"metadata":{},"sourceType":"module"}